<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>微天气-模型设计 | Fuyi Atlas</title>
<meta name="keywords" content="weather">
<meta name="description" content="前言 这是一个前后端分离的项目，后端使用Java进行开发，而前端通过微信小程序实现。
功能结构 可从上图得知，部分功能已去除：
消息 消息推送 紧急情况推送 用户 个人中心 模型设计 用户信息（UserInfo） id Long 主键 oid String OpenID uid String UnionID name String 昵称 phone_num String 手机号 avatar String 头像地址 authState String 登录状态 Silence 静默登录（目前程序的访问是需要存在登录态的） Authorized 已授权 createTime Timestamp 记录创建时间 updateTime Timestamp 记录更新时间 行政区划信息（DistrictInfo） 使用全国行政区划信息填充，含空间数据，数据粒度到区县。目前仅支持国内数据。
id Long 主键 name String 行政区名称 grade Integer 行政区级别 1：省级行政区 2：地级行政区 3：县级行政区 4：乡镇级行政区 code String 行政区代码 centerPoint Point 行政区中心点（空间数据） bounds Geometry 行政区边界（空间数据） 关注城市（FollowCity） id Long 主键 userId Long 用户ID districtId Long 行政区划ID districtName String 行政区划名称 districtCode String 行政区划编码 orderNum Integer 序号，自然数，从1开始 createTime Timestamp 记录创建时间 天气信息 由于天气数据均来自第三方，目前数据格式于和风天气对齐。">
<meta name="author" content="Fuyi">
<link rel="canonical" href="https://fuyi-atlas.github.io/posts/program/micro-weather/003/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a61ecc0df414536d559b3d0ca421e2b1de8f39b8a4910b32fedccecbc2c0d59c.css" integrity="sha256-ph7MDfQUU21Vmz0MpCHisd6PObikkQsy/tzOy8LA1Zw=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://fuyi-atlas.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://fuyi-atlas.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://fuyi-atlas.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://fuyi-atlas.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://fuyi-atlas.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://fuyi-atlas.github.io/posts/program/micro-weather/003/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="微天气-模型设计" />
<meta property="og:description" content="前言 这是一个前后端分离的项目，后端使用Java进行开发，而前端通过微信小程序实现。
功能结构 可从上图得知，部分功能已去除：
消息 消息推送 紧急情况推送 用户 个人中心 模型设计 用户信息（UserInfo） id Long 主键 oid String OpenID uid String UnionID name String 昵称 phone_num String 手机号 avatar String 头像地址 authState String 登录状态 Silence 静默登录（目前程序的访问是需要存在登录态的） Authorized 已授权 createTime Timestamp 记录创建时间 updateTime Timestamp 记录更新时间 行政区划信息（DistrictInfo） 使用全国行政区划信息填充，含空间数据，数据粒度到区县。目前仅支持国内数据。
id Long 主键 name String 行政区名称 grade Integer 行政区级别 1：省级行政区 2：地级行政区 3：县级行政区 4：乡镇级行政区 code String 行政区代码 centerPoint Point 行政区中心点（空间数据） bounds Geometry 行政区边界（空间数据） 关注城市（FollowCity） id Long 主键 userId Long 用户ID districtId Long 行政区划ID districtName String 行政区划名称 districtCode String 行政区划编码 orderNum Integer 序号，自然数，从1开始 createTime Timestamp 记录创建时间 天气信息 由于天气数据均来自第三方，目前数据格式于和风天气对齐。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://fuyi-atlas.github.io/posts/program/micro-weather/003/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-01T22:45:39+08:00" />
<meta property="article:modified_time" content="2022-06-01T22:45:39+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="微天气-模型设计"/>
<meta name="twitter:description" content="前言 这是一个前后端分离的项目，后端使用Java进行开发，而前端通过微信小程序实现。
功能结构 可从上图得知，部分功能已去除：
消息 消息推送 紧急情况推送 用户 个人中心 模型设计 用户信息（UserInfo） id Long 主键 oid String OpenID uid String UnionID name String 昵称 phone_num String 手机号 avatar String 头像地址 authState String 登录状态 Silence 静默登录（目前程序的访问是需要存在登录态的） Authorized 已授权 createTime Timestamp 记录创建时间 updateTime Timestamp 记录更新时间 行政区划信息（DistrictInfo） 使用全国行政区划信息填充，含空间数据，数据粒度到区县。目前仅支持国内数据。
id Long 主键 name String 行政区名称 grade Integer 行政区级别 1：省级行政区 2：地级行政区 3：县级行政区 4：乡镇级行政区 code String 行政区代码 centerPoint Point 行政区中心点（空间数据） bounds Geometry 行政区边界（空间数据） 关注城市（FollowCity） id Long 主键 userId Long 用户ID districtId Long 行政区划ID districtName String 行政区划名称 districtCode String 行政区划编码 orderNum Integer 序号，自然数，从1开始 createTime Timestamp 记录创建时间 天气信息 由于天气数据均来自第三方，目前数据格式于和风天气对齐。"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://fuyi-atlas.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "微天气-模型设计",
      "item": "https://fuyi-atlas.github.io/posts/program/micro-weather/003/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "微天气-模型设计",
  "name": "微天气-模型设计",
  "description": "前言 这是一个前后端分离的项目，后端使用Java进行开发，而前端通过微信小程序实现。\n功能结构 可从上图得知，部分功能已去除：\n消息 消息推送 紧急情况推送 用户 个人中心 模型设计 用户信息（UserInfo） id Long 主键 oid String OpenID uid String UnionID name String 昵称 phone_num String 手机号 avatar String 头像地址 authState String 登录状态 Silence 静默登录（目前程序的访问是需要存在登录态的） Authorized 已授权 createTime Timestamp 记录创建时间 updateTime Timestamp 记录更新时间 行政区划信息（DistrictInfo） 使用全国行政区划信息填充，含空间数据，数据粒度到区县。目前仅支持国内数据。\nid Long 主键 name String 行政区名称 grade Integer 行政区级别 1：省级行政区 2：地级行政区 3：县级行政区 4：乡镇级行政区 code String 行政区代码 centerPoint Point 行政区中心点（空间数据） bounds Geometry 行政区边界（空间数据） 关注城市（FollowCity） id Long 主键 userId Long 用户ID districtId Long 行政区划ID districtName String 行政区划名称 districtCode String 行政区划编码 orderNum Integer 序号，自然数，从1开始 createTime Timestamp 记录创建时间 天气信息 由于天气数据均来自第三方，目前数据格式于和风天气对齐。",
  "keywords": [
    "weather"
  ],
  "articleBody": "前言 这是一个前后端分离的项目，后端使用Java进行开发，而前端通过微信小程序实现。\n功能结构 可从上图得知，部分功能已去除：\n消息 消息推送 紧急情况推送 用户 个人中心 模型设计 用户信息（UserInfo） id Long 主键 oid String OpenID uid String UnionID name String 昵称 phone_num String 手机号 avatar String 头像地址 authState String 登录状态 Silence 静默登录（目前程序的访问是需要存在登录态的） Authorized 已授权 createTime Timestamp 记录创建时间 updateTime Timestamp 记录更新时间 行政区划信息（DistrictInfo） 使用全国行政区划信息填充，含空间数据，数据粒度到区县。目前仅支持国内数据。\nid Long 主键 name String 行政区名称 grade Integer 行政区级别 1：省级行政区 2：地级行政区 3：县级行政区 4：乡镇级行政区 code String 行政区代码 centerPoint Point 行政区中心点（空间数据） bounds Geometry 行政区边界（空间数据） 关注城市（FollowCity） id Long 主键 userId Long 用户ID districtId Long 行政区划ID districtName String 行政区划名称 districtCode String 行政区划编码 orderNum Integer 序号，自然数，从1开始 createTime Timestamp 记录创建时间 天气信息 由于天气数据均来自第三方，目前数据格式于和风天气对齐。\n通过对和风天气响应数据结构研究，抽象出基础响应，实际响应均继承该基础响应类，并实现getDataColumn方法，以标记对应数据列。\n目前使用代理方式进行第三方接口调用，且将结构对齐交由前端进行，所以此处并未进行强格式定义。\n基础响应信息 package org.fuyi.weather.infra.common.entity; import com.alibaba.fastjson.JSON; import com.alibaba.fastjson.JSONObject; import java.io.Serializable; /** * 天气代理实体基础类 * * @author: Fuyi * @time: 2022/2/1 下午3:22 * @since: 1.0 */ public abstract class AbstractWeatherProxyWrappedEntity implements Serializable { private static final long serialVersionUID = 5559333755209092109L; /** * API状态码，具体含义请参考状态码 * 参考 https://dev.qweather.com/docs/resource/status-code/ */ private String code; /** * 当前API的最近更新时间 * 参考 https://dev.qweather.com/docs/resource/glossary/#update-time */ private String updateTime; /** * 当前数据的响应式页面，便于嵌入网站或应用 */ private String fxLink; private JSONObject refer; private JSON data; public AbstractWeatherProxyWrappedEntity() { } // 标记数据列 public abstract String getDataColumn(); // get and set method. ... } 实时空气数据（例） package org.fuyi.weather.domain.entity; import lombok.*; import org.fuyi.weather.infra.common.constant.WeatherProxyConstant; import org.fuyi.weather.infra.common.entity.AbstractWeatherProxyWrappedEntity; /** * @author: Fuyi * @time: 2022/2/1 下午4:07 * @since: 1.0 */ @Data @Builder @NoArgsConstructor @ToString(callSuper = true) @EqualsAndHashCode(callSuper = false) public class AirRealTimeEntity extends AbstractWeatherProxyWrappedEntity { @Override public String getDataColumn() { // WeatherProxyConstant.DataColumn.NOW --\u003e \"now\" return WeatherProxyConstant.DataColumn.NOW; } } 参考 小程序静默登录方案设计 说明 如有冒犯，我在这里先向您道歉，还请联系我进行处理\nemail: thread_zhou@126.com\n",
  "wordCount" : "237",
  "inLanguage": "en",
  "datePublished": "2022-06-01T22:45:39+08:00",
  "dateModified": "2022-06-01T22:45:39+08:00",
  "author":{
    "@type": "Person",
    "name": "Fuyi"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://fuyi-atlas.github.io/posts/program/micro-weather/003/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Fuyi Atlas",
    "logo": {
      "@type": "ImageObject",
      "url": "https://fuyi-atlas.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://fuyi-atlas.github.io/" accesskey="h" title="Fuyi Atlas (Alt + H)">Fuyi Atlas</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://fuyi-atlas.github.io/zh/" title="Chinese"
                            aria-label="Chinese">Zh</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://fuyi-atlas.github.io/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://fuyi-atlas.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://fuyi-atlas.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://fuyi-atlas.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://fuyi-atlas.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://fuyi-atlas.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      微天气-模型设计
    </h1>
    <div class="post-meta"><span title='2022-06-01 22:45:39 +0800 CST'>June 1, 2022</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Fuyi

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%89%8d%e8%a8%80" aria-label="前言">前言</a></li>
                <li>
                    <a href="#%e5%8a%9f%e8%83%bd%e7%bb%93%e6%9e%84" aria-label="功能结构">功能结构</a></li>
                <li>
                    <a href="#%e6%a8%a1%e5%9e%8b%e8%ae%be%e8%ae%a1" aria-label="模型设计">模型设计</a><ul>
                        
                <li>
                    <a href="#%e7%94%a8%e6%88%b7%e4%bf%a1%e6%81%afuserinfo" aria-label="用户信息（UserInfo）">用户信息（UserInfo）</a></li>
                <li>
                    <a href="#%e8%a1%8c%e6%94%bf%e5%8c%ba%e5%88%92%e4%bf%a1%e6%81%afdistrictinfo" aria-label="行政区划信息（DistrictInfo）">行政区划信息（DistrictInfo）</a></li>
                <li>
                    <a href="#%e5%85%b3%e6%b3%a8%e5%9f%8e%e5%b8%82followcity" aria-label="关注城市（FollowCity）">关注城市（FollowCity）</a></li>
                <li>
                    <a href="#%e5%a4%a9%e6%b0%94%e4%bf%a1%e6%81%af" aria-label="天气信息">天气信息</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e7%a1%80%e5%93%8d%e5%ba%94%e4%bf%a1%e6%81%af" aria-label="基础响应信息">基础响应信息</a></li>
                <li>
                    <a href="#%e5%ae%9e%e6%97%b6%e7%a9%ba%e6%b0%94%e6%95%b0%e6%8d%ae%e4%be%8b" aria-label="实时空气数据（例）">实时空气数据（例）</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%8f%82%e8%80%83" aria-label="参考">参考</a></li>
                <li>
                    <a href="#%e8%af%b4%e6%98%8e" aria-label="说明">说明</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="前言">前言<a hidden class="anchor" aria-hidden="true" href="#前言">#</a></h2>
<p>这是一个前后端分离的项目，后端使用Java进行开发，而前端通过微信小程序实现。</p>
<h2 id="功能结构">功能结构<a hidden class="anchor" aria-hidden="true" href="#功能结构">#</a></h2>
<p><img loading="lazy" src="https://zhou-fuyi.github.io/picx-images-hosting/%e5%a4%a9%e6%b0%94%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%8a%9f%e8%83%bd%e6%9e%b6%e6%9e%84.1e8cth6gi3.webp" alt="天气小程序功能架构"  />
</p>
<!-- more -->
<p>可从上图得知，部分功能已去除：</p>
<ul>
<li>消息
<ul>
<li>消息推送</li>
<li>紧急情况推送</li>
</ul>
</li>
<li>用户
<ul>
<li>个人中心</li>
</ul>
</li>
</ul>
<h2 id="模型设计">模型设计<a hidden class="anchor" aria-hidden="true" href="#模型设计">#</a></h2>
<h3 id="用户信息userinfo">用户信息（UserInfo）<a hidden class="anchor" aria-hidden="true" href="#用户信息userinfo">#</a></h3>
<ul>
<li>id Long 主键</li>
<li>oid String OpenID</li>
<li>uid String UnionID</li>
<li>name String 昵称</li>
<li>phone_num String 手机号</li>
<li>avatar String 头像地址</li>
<li>authState String 登录状态
<ul>
<li><em><code>Silence</code></em> 静默登录（目前程序的访问是需要存在登录态的）</li>
<li><em><code>Authorized</code></em> 已授权</li>
</ul>
</li>
<li>createTime Timestamp 记录创建时间</li>
<li>updateTime Timestamp 记录更新时间</li>
</ul>
<h3 id="行政区划信息districtinfo">行政区划信息（DistrictInfo）<a hidden class="anchor" aria-hidden="true" href="#行政区划信息districtinfo">#</a></h3>
<p>使用全国行政区划信息填充，含空间数据，数据粒度到区县。目前仅支持国内数据。</p>
<ul>
<li>id Long 主键</li>
<li>name String 行政区名称</li>
<li>grade Integer 行政区级别
<ul>
<li>1：省级行政区</li>
<li>2：地级行政区</li>
<li>3：县级行政区</li>
<li>4：乡镇级行政区</li>
</ul>
</li>
<li>code String 行政区代码</li>
<li>centerPoint Point 行政区中心点（空间数据）</li>
<li>bounds Geometry 行政区边界（空间数据）</li>
</ul>
<h3 id="关注城市followcity">关注城市（FollowCity）<a hidden class="anchor" aria-hidden="true" href="#关注城市followcity">#</a></h3>
<ul>
<li>id Long 主键</li>
<li>userId Long 用户ID</li>
<li>districtId Long 行政区划ID</li>
<li>districtName String 行政区划名称</li>
<li>districtCode String 行政区划编码</li>
<li>orderNum Integer 序号，自然数，从1开始</li>
<li>createTime Timestamp 记录创建时间</li>
</ul>
<h3 id="天气信息">天气信息<a hidden class="anchor" aria-hidden="true" href="#天气信息">#</a></h3>
<p>由于天气数据均来自第三方，目前数据格式于和风天气对齐。</p>
<p>通过对和风天气响应数据结构研究，抽象出基础响应，实际响应均继承该基础响应类，并实现getDataColumn方法，以标记对应数据列。</p>
<p>目前使用代理方式进行第三方接口调用，且将结构对齐交由前端进行，所以此处并未进行强格式定义。</p>
<h4 id="基础响应信息">基础响应信息<a hidden class="anchor" aria-hidden="true" href="#基础响应信息">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.fuyi.weather.infra.common.entity</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.Serializable</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 天气代理实体基础类
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @author: &lt;a href=&#34;mailto:thread.zhou@gmail.com&#34;&gt;Fuyi&lt;/a&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @time: 2022/2/1 下午3:22
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @since: 1.0
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AbstractWeatherProxyWrappedEntity</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">serialVersionUID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">5559333755209092109L</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * API状态码，具体含义请参考状态码
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 参考 &lt;a&gt;https://dev.qweather.com/docs/resource/status-code/&lt;/a&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 当前API的最近更新时间
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 参考 &lt;a&gt;https://dev.qweather.com/docs/resource/glossary/#update-time&lt;/a&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">updateTime</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 当前数据的响应式页面，便于嵌入网站或应用
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">fxLink</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">refer</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="n">data</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">AbstractWeatherProxyWrappedEntity</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="c1">// 标记数据列</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDataColumn</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="c1">// get and set method.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h4 id="实时空气数据例">实时空气数据（例）<a hidden class="anchor" aria-hidden="true" href="#实时空气数据例">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.fuyi.weather.domain.entity</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">lombok.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.fuyi.weather.infra.common.constant.WeatherProxyConstant</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.fuyi.weather.infra.common.entity.AbstractWeatherProxyWrappedEntity</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @author: &lt;a href=&#34;mailto:thread.zhou@gmail.com&#34;&gt;Fuyi&lt;/a&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @time: 2022/2/1 下午4:07
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @since: 1.0
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nd">@Data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nd">@Builder</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nd">@NoArgsConstructor</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nd">@ToString</span><span class="p">(</span><span class="n">callSuper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nd">@EqualsAndHashCode</span><span class="p">(</span><span class="n">callSuper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AirRealTimeEntity</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractWeatherProxyWrappedEntity</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDataColumn</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">				</span><span class="c1">// WeatherProxyConstant.DataColumn.NOW --&gt; &#34;now&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">WeatherProxyConstant</span><span class="p">.</span><span class="na">DataColumn</span><span class="p">.</span><span class="na">NOW</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h2 id="参考">参考<a hidden class="anchor" aria-hidden="true" href="#参考">#</a></h2>
<ul>
<li><a href="https://juejin.cn/post/6933082931653148680">小程序静默登录方案设计</a></li>
</ul>
<h2 id="说明">说明<a hidden class="anchor" aria-hidden="true" href="#说明">#</a></h2>
<blockquote>
<p>如有冒犯，我在这里先向您道歉，还请联系我进行处理</p>
<p>email: <a href="mailto:thread_zhou@126.com">thread_zhou@126.com</a></p>
</blockquote>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://fuyi-atlas.github.io/tags/weather/">Weather</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://fuyi-atlas.github.io/posts/program/micro-weather/004/">
    <span class="title">« Prev</span>
    <br>
    <span>微天气-开发环境准备</span>
  </a>
  <a class="next" href="https://fuyi-atlas.github.io/posts/program/micro-weather/002/">
    <span class="title">Next »</span>
    <br>
    <span>微天气-技术预研</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://fuyi-atlas.github.io/">Fuyi Atlas</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
